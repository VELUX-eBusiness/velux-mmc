var generalSettings;function loadConfigurator(e){var f=e.directory,j=0;if(f.match(/\/\//gi)){f=f.split("//");e.directory="//"+f[1]}else{if(f.charAt(0)=="/"){}else{if(!f.match(/\/\//gi)){e.directory="//"+e.directory}}}if(e.directory.charAt(e.directory.length-1)!="/"){e.directory+="/"}e.target=(e.target===undefined)?"#mmc__InsertConfigurator":e.target;e.directory=(e.directory===undefined)?"/":e.directory;e.skin=(e.skin===undefined)?"veluxshop":e.skin;e.language=(e.language===undefined)?"en":e.language;e.did="//"+location.hostname+"/";e.cid=e.clientID;e.showDealerButton=(e.showDealerButton===undefined)?false:e.showDealerButton;e.showShopButton=(e.showShopButton===undefined)?true:e.showShopButton;e.showPrintButton=(e.showPrintButton===undefined)?false:e.showPrintButton;e.showMailButton=(e.showMailButton===undefined)?false:e.showMailButton;e.dealerTarget=(e.dealerTarget===undefined)?"_blank":e.dealerTarget;e.shopTarget=(e.shopTarget===undefined)?"_self":e.shopTarget;e.basketType=(e.basketType===undefined)?"veluxshop":e.basketType;e.environment=(e.environment===undefined)?"":(e.environment=="production")?"":"qa";e.min=(e.min===undefined)?true:e.min;e.disableRules=(e.disableRules===undefined)?false:e.disableRules;e.formMethod=(e.formMethod===undefined)?"POST":e.formMethod;e.returnFunc=(e.returnFunc===undefined)?function(){return}:e.returnFunc;e.onBeforeLoad=(e.onBeforeLoad===undefined)?function(){return}:e.onBeforeLoad;e.onAfterLoad=(e.onAfterLoad===undefined)?function(){return}:e.onAfterLoad;e.onBeforeInit=(e.onBeforeInit===undefined)?function(){return}:e.onBeforeInit;e.onAfterInit=(e.onAfterInit===undefined)?function(){return}:e.onAfterInit;e.onBeforeUpdate=(e.onBeforeUpdate===undefined)?function(){return}:e.onBeforeUpdate;e.onAfterUpdate=(e.onAfterUpdate===undefined)?function(){return}:e.onAfterUpdate;e.onBeforeSwitchStep=(e.onBeforeSwitchStep===undefined)?function(){return}:e.onBeforeSwitchStep;e.onAfterSwitchStep=(e.onAfterSwitchStep===undefined)?function(){return}:e.onAfterSwitchStep;e.onBeforeAddToBasket=(e.onBeforeAddToBasket===undefined)?function(){return}:e.onBeforeAddToBasket;e.onAfterAddToBasket=(e.onAfterAddToBasket===undefined)?function(){return}:e.onAfterAddToBasket;e.onBeforeLoad();function d(){var k=document.createElement("script");k.type="text/javascript";k.src=e.directory+"content/js/jquery-1.9.1.min.js";document.getElementsByTagName("head")[0].appendChild(k)}if(typeof jQuery=="undefined"){d()}else{if(typeof jQuery!="undefined"&&jQuery().jquery<"1.9"){var g=jQuery.noConflict(true);d()}}function c(o,k,n){var m=[];$.each(document.getElementsByTagName("link"),function(p,r){var q=$(r).attr("href");if(q){m.push(q.slice(q.lastIndexOf("/")+1,q.lastIndexOf(".")))}});var l=document.createElement("link");l.rel="stylesheet";l.type="text/css";l.href=o+"/"+k;l.media=n;if(typeof l!="undefined"&&$.inArray(k,m)==-1){document.getElementsByTagName("head")[0].appendChild(l)}}function i(){(function(n,k,o){var m="//"+e.environment+"configurator.veluxshop.com/?option=com_configurator",l="&baseurl="+e.directory+"&lang="+e.language+"&did="+e.did+"&cid="+e.cid+"&dealerurl="+e.dealerURL+"&dealertarget="+e.dealerTarget+"&shoptarget="+e.shopTarget+"&formmethod="+e.formMethod;o.getScript(e.directory+"content/js/jQuery.XDomainRequest.js",function(){o.support.cors=true;o.ajax({dataType:"html",type:"POST",url:m+l,success:function(u){var s=e.directory+"content/",p=["js/knockout-2.2.1.js","js/chosen/chosen.jquery.min.js","js/shadowbox/shadowbox.js"],w=0,t=0,q=o("<div />");if(e.min==false){p.push("js/velux-configurator-lib.js");p.push("js/velux-configurator-rules.js")}q.append(u);q.find("#mmc__AddToBasket").attr("action",e.returnURL);o(e.target).append(q.find("#mmc__Configurator"));q=null;h();c(s+"css","velux-configurator.css","screen");c(s+"css","velux-configurator.print.css","print");c(s+"css","skin-"+e.skin+".css","screen");o.each(p,function(x,y){o.getScript(s+y,function(){w++})});function v(){t++;if(w==p.length){r()}else{if(t<100){setTimeout(v,100)}else{b()}}}v();function r(){if(e.min==false){o.getScript(s+"js/velux-configurator.js")}else{o.getScript(s+"js/velux-configurator.min.js")}}e.onAfterLoad()}})})})(window,document,jQuery);if(g){$=g;jQuery=g;delete g}}function b(){var k=confirm("The page has taken too long to load, please try again.");if(k==true){location.reload()}else{return}}function h(){generalSettings=e}function a(){j++;if(typeof jQuery!="undefined"){i();return}if(j<100){setTimeout(a,100)}return}a()};