function loadConfigurator(n){function f(){var t=document.createElement("script");t.type="text/javascript";t.src=n.directory+"content/js/jquery-1.9.1.min.js";document.getElementsByTagName("head")[0].appendChild(t)}function r(n,t,i){var u=[],r;$.each(document.getElementsByTagName("link"),function(n,t){var i=$(t).attr("href");i&&u.push(i.slice(i.lastIndexOf("/")+1,i.lastIndexOf(".")))});r=document.createElement("link");r.rel="stylesheet";r.type="text/css";r.href=n+"/"+t;r.media=i;typeof r!="undefined"&&$.inArray(t,u)==-1&&document.getElementsByTagName("head")[0].appendChild(r)}function o(){(function(t,i,u){function o(t){function o(){e++;f==i.length?c():e<100?setTimeout(o,100):s()}function c(){n.min==!1?u.getScript(siteLocation+"js/velux-configurator.js"):u.getScript(siteLocation+"js/velux-configurator-bundle.min.js")}var i=["js/knockout-2.2.1.js","js/chosen/chosen.jquery.min.js","js/shadowbox/shadowbox.js"],f=0,e=0,r=u("<div />");n.min==!1&&(i.push("js/velux-configurator-lib.js"),i.push("js/velux-configurator-rules.js"));r.append(t);r.find("#mmc__AddToBasket").attr("action",n.returnURL);u(n.target).append(r.find("#mmc__Configurator"));r=null;n.loadingTitle&&u(n.target).find("#mmc__Configurator #mmc__LoadingConfigurator").remove();h();u.each(i,function(n,t){u.getScript(siteLocation+t,function(){f++})});o();n.onAfterLoad()}var c=n.environment+"?option=com_configurator&view="+n.renderer,l="&baseurl="+n.directory+"&imagesDirectory="+n.imagesDirectory+"&lang="+n.language+"&did="+n.did+"&cid="+n.cid+"&dealerurl="+n.dealerURL+"&dealertarget="+n.dealerTarget+"&shoptarget="+n.shopTarget+"&formmethod="+n.formMethod,a="&windowtype="+n.windowType+"&windowsize="+n.windowSize+"&category="+n.category+"&operation="+n.operation+"&colour="+n.colour+"&outersurface="+n.outerSurface,e,f;siteLocation=n.directory+"content/";r(siteLocation+"css","velux-configurator.css","screen");r(siteLocation+"css","velux-configurator.print.css","print");r(siteLocation+"css","skin-"+n.skin+".css","screen");n.loadingTitle&&(n.loading=u('<div id="mmc__LoadingConfigurator"><\/div>').append('<div class="mmc__loadingTitle">'+n.loadingTitle+"<\/div>").append('<div class="mmc__loadingSubTitle">'+n.loadingSubtitle+"<\/div>").append('<div class="mmc__loadingIcon">&nbsp;<\/div>').show(),u(n.target).prepend(n.loading));e=c+l+a;XMLHttpRequest&&(f=new XMLHttpRequest,"withCredentials"in f?(f.open("GET",e,!0),f.onloadend=function(){o(f.response)},f.send()):XDomainRequest&&(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)}(function(n){if(!n.support.cors&&n.ajaxTransport&&t.XDomainRequest){var i=/^https?:\/\//i,r=/^get|post$/i,u=new RegExp("^"+location.protocol,"i");n.ajaxTransport("* text html xml json",function(t,f){if(t.crossDomain&&t.async&&r.test(t.type)&&i.test(t.url)&&u.test(t.url)){var e=null;return{send:function(i,r){var o="",u=(f.dataType||"").toLowerCase();e=new XDomainRequest;/^\d+$/.test(f.timeout)&&(e.timeout=f.timeout);e.ontimeout=function(){r(500,"timeout")};e.onload=function(){var o="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType,i={code:200,message:"success"},f={text:e.responseText},t;try{if(u==="html"||/text\/html/i.test(e.contentType))f.html=e.responseText;else if(u==="json"||u!=="text"&&/\/json/i.test(e.contentType))try{f.json=n.parseJSON(e.responseText)}catch(h){i.code=500;i.message="parseerror"}else if(u==="xml"||u!=="text"&&/\/xml/i.test(e.contentType)){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;try{t.loadXML(e.responseText)}catch(h){t=undefined}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){i.code=500;i.message="parseerror";throw"Invalid XML: "+e.responseText;}f.xml=t}}catch(s){throw s;}finally{r(i.code,i.message,f,o)}};e.onprogress=function(){};e.onerror=function(){r(500,"error",{text:e.responseText})};f.data&&(o=n.type(f.data)==="string"?f.data:n.param(f.data));e.open(t.type,t.url);e.send(o)},abort:function(){e&&e.abort()}}}})}}),u.ajax({type:"GET",url:e,processData:!0,dataType:"html",success:function(n){o(n)},error:function(){}})))})(window,document,jQuery);i&&($=i,jQuery=i,delete i)}function s(){var n=confirm("The page has taken too long to load, please try again.");if(n==!0)location.reload();else return}function h(){generalSettings=n}function e(){if(u++,typeof jQuery!="undefined"){o();return}u<100&&setTimeout(e,100);return}var t=n.directory,u=0,i;t.match(/\/\//gi)?(t=t.split("//"),n.directory="//"+t[1]):t.charAt(0)=="/"||t.match(/\/\//gi)||(n.directory="//"+n.directory);n.directory.charAt(n.directory.length-1)!="/"&&(n.directory+="/");n.target=n.target===undefined?"#mmc__InsertConfigurator":n.target;n.directory=n.directory===undefined?"/":n.directory;n.illustrationsDirectory=n.illustrationsDirectory===undefined?null:n.illustrationsDirectory;n.coloursDirectory=n.coloursDirectory===undefined?null:n.coloursDirectory;n.skin=n.skin===undefined?"veluxshop":n.skin;n.language=n.language===undefined?"en":n.language;n.did="//"+location.hostname+"/";n.cid=n.clientID;n.showDealerButton=n.showDealerButton===undefined?!1:n.showDealerButton;n.showShopButton=n.showShopButton===undefined?!0:n.showShopButton;n.showPrintButton=n.showPrintButton===undefined?!1:n.showPrintButton;n.showMailButton=n.showMailButton===undefined?!1:n.showMailButton;n.dealerTarget=n.dealerTarget===undefined?"_blank":n.dealerTarget;n.shopTarget=n.shopTarget===undefined?"_self":n.shopTarget;n.basketType=n.basketType===undefined?"veluxshop":n.basketType;n.showWindowStep=n.showWindowStep===undefined?!0:n.showWindowStep;n.showCategoryStep=n.showCategoryStep===undefined?!0:n.showCategoryStep;n.showOperationStep=n.showOperationStep===undefined?!0:n.showOperationStep;n.showColourStep=n.showColourStep===undefined?!0:n.showColourStep;n.showOuterSurfaceStep=n.showOuterSurfaceStep===undefined?!0:n.showOuterSurfaceStep;n.showInsectNetStep=n.showInsectNetStep===undefined?!0:n.showInsectNetStep;n.showExtraQuestion=n.showExtraQuestion===undefined?!0:n.showExtraQuestion;n.showOnlyFlatroof=n.showOnlyFlatroof===undefined?!1:n.showOnlyFlatroof;n.environment=n.environment===undefined?"//configurator.veluxshop.com/":n.environment;n.environment=="production"?n.environment="//configurator.veluxshop.com/":n.environment=="test"?n.environment="//qaconfigurator.veluxshop.com/":n.environment=="localhost"?n.environment="//localhost/mmc/":n.environment=="veluxshop"&&(n.environment=location.origin+location.pathname+"/");n.renderer=n.renderer===undefined?"blinds":n.renderer;n.min=n.min===undefined?!0:n.min;n.disableRules=n.disableRules===undefined?!1:n.disableRules;n.formMethod=n.formMethod===undefined?"GET":n.formMethod;n.returnFunc=n.returnFunc===undefined?null:n.returnFunc;n.loadingTitle=n.loadingTitle===undefined?"":n.loadingTitle;n.loadingSubtitle=n.loadingSubtitle===undefined?"":n.loadingSubtitle;n.windowType=n.windowType===undefined?null:n.windowType;n.windowSize=n.windowSize===undefined?null:n.windowSize;n.category=n.category===undefined?null:n.category;n.operation=n.operation===undefined?null:n.operation;n.colour=n.colour===undefined?null:n.colour;n.outerSurface=n.outerSurface===undefined?null:n.outerSurface;n.percentDiscount=n.percentDiscount===undefined?null:n.percentDiscount;n.percentDiscountAddOnPleated=n.percentDiscountAddOnPleated===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountAddOnPleated;n.percentDiscountAwning=n.percentDiscountAwning===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountAwning;n.percentDiscountBlackout=n.percentDiscountBlackout===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountBlackout;n.percentDiscountDuo=n.percentDiscountDuo===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountDuo;n.percentDiscountEnergy=n.percentDiscountEnergy===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountEnergy;n.percentDiscountFlatroofAwning=n.percentDiscountFlatroofAwning===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountFlatroofAwning;n.percentDiscountFlatroofEnergy=n.percentDiscountFlatroofEnergy===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountFlatroofEnergy;n.percentDiscountFlatroofPleated=n.percentDiscountFlatroofPleated===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountFlatroofPleated;n.percentDiscountInsectNet=n.percentDiscountInsectNet===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountInsectNet;n.percentDiscountPleated=n.percentDiscountPleated===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountPleated;n.percentDiscountRoller=n.percentDiscountRoller===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountRoller;n.percentDiscountShutters=n.percentDiscountShutters===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountShutters;n.percentDiscountVenetian=n.percentDiscountVenetian===undefined?n.percentDiscount?n.percentDiscount:null:n.percentDiscountVenetian;n.onBeforeLoad=n.onBeforeLoad===undefined?function(){return}:n.onBeforeLoad;n.onAfterLoad=n.onAfterLoad===undefined?function(){return}:n.onAfterLoad;n.onBeforeInit=n.onBeforeInit===undefined?function(){return}:n.onBeforeInit;n.onAfterInit=n.onAfterInit===undefined?function(){return}:n.onAfterInit;n.onBeforeUpdate=n.onBeforeUpdate===undefined?function(){return}:n.onBeforeUpdate;n.onAfterUpdate=n.onAfterUpdate===undefined?function(){return}:n.onAfterUpdate;n.onBeforeSwitchStep=n.onBeforeSwitchStep===undefined?function(){return}:n.onBeforeSwitchStep;n.onAfterSwitchStep=n.onAfterSwitchStep===undefined?function(){return}:n.onAfterSwitchStep;n.onBeforeAddToBasket=n.onBeforeAddToBasket===undefined?function(){return}:n.onBeforeAddToBasket;n.onAfterAddToBasket=n.onAfterAddToBasket===undefined?function(){return}:n.onAfterAddToBasket;n.onSelectWindowType=n.onSelectWindowType===undefined?function(){return}:n.onSelectWindowType;n.onSelectWindowSize=n.onSelectWindowSize===undefined?function(){return}:n.onSelectWindowSize;n.onSelectCategory=n.onSelectCategory===undefined?function(){return}:n.onSelectCategory;n.onSelectOperation=n.onSelectOperation===undefined?function(){return}:n.onSelectOperation;n.onSelectColour=n.onSelectColour===undefined?function(){return}:n.onSelectColour;n.onSelectInsectNetType=n.onSelectInsectNetType===undefined?function(){return}:n.onSelectInsectNetType;n.onSelectInsectNet=n.onSelectInsectNet===undefined?function(){return}:n.onSelectInsectNet;n.onSelectOuterSurface=n.onSelectOuterSurface===undefined?function(){return}:n.onSelectOuterSurface;n.onNextWindow=n.onNextWindow===undefined?function(){return}:n.onNextWindow;n.onNextCategory=n.onNextCategory===undefined?function(){return}:n.onNextCategory;n.onNextOperation=n.onNextOperation===undefined?function(){return}:n.onNextOperation;n.onNextColour=n.onNextColour===undefined?function(){return}:n.onNextColour;n.onNextInsectnet=n.onNextInsectnet===undefined?function(){return}:n.onNextInsectnet;n.onNextOuterSurface=n.onNextOuterSurface===undefined?function(){return}:n.onNextOuterSurface;n.onButtonWindowUnknown=n.onButtonWindowUnknown===undefined?function(){return}:n.onButtonWindowUnknown;n.onButtonDealer=n.onButtonDealer===undefined?function(){return}:n.onButtonDealer;n.onButtonAddToBasket=n.onButtonAddToBasket===undefined?function(){return}:n.onButtonAddToBasket;n.onButtonPrint=n.onButtonPrint===undefined?function(){return}:n.onButtonPrint;n.onButtonEmail=n.onButtonEmail===undefined?function(){return}:n.onButtonEmail;n.onBeforeLoad();typeof jQuery=="undefined"?f():typeof jQuery!="undefined"&&jQuery().jquery<"1.9"&&(i=jQuery.noConflict(!0),f());e()}var generalSettings;
//# sourceMappingURL=insert-velux-configurator.min.js.map
