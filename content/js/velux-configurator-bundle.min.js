function loadRulesFunctions(n,t,i,r,u){var f=this,e;this.process=function(t){n.settings.disableRules!=!0&&(u.each(t,function(t,i){n.settings.rules.variantUnknown=i.VariantUnknown;n.settings.rules.productionUnknown=i.ProductionUnknown;try{f["Rule"+t](i)}catch(r){f.RuleDefault(i)}}),n.vm.controls.showQuestion()&&n.dom.complete.hasClass("mmc__active")&&(n.dom.complete.removeClass("mmc__active"),n.dom.complete.find(".mmc__content").hide(),n.dom.selection.find(".mmc__product:not(.mmc__hidden)").show(),n.setActiveStep()))};e={normal:{run:function(n){f.showRuleMessage(n,n.PostText,"note")},range:["8","10","11","100","101","102","103","501"]},adapter:{run:function(n){f.showAddonProduct(n);f.showRuleMessage(n,n.PostText,"note")},range:["503"]},insect:{run:function(t){n.vm.controls.showProduct2()&&(f.showAddonProduct(t),f.showRuleMessage(t,t.PostText,"note"))},range:["504"]},rule505:{run:function(t){var i=n.vm.config.product1;(i.windowsize().charAt(0)=="B"||i.windowsize().charAt(0)=="C"||i.windowsize().charAt(0)=="F")&&f.showRuleMessage(t,t.PostText,"error")},range:["505"]},rule506:{run:function(t){var i=n.vm.config.product1;i.windowsize().charAt(0)!="Y"&&f.showRuleMessage(t,t.PostText,"note")},range:["506"]},production:{run:function(t){var i=["note"];t.Product&&t.Product.AskForProductCode&&(i.push("production"),n.settings.rules.production.MatchFoundTrue=function(){if(n.trigger.target.addClass("mmc__check"),f.showRuleMessage(t,t.ProductionTrue,"check","tick"),t.RuleNo=="9"){var i=n.dom.base.find('.mmc__product[data-productid*="MAD"]');i.removeClass("mmc__disabled")}},n.settings.rules.production.MatchFoundFalse=function(){if(n.trigger.target.addClass("mmc__error"),f.showRuleMessage(t,t.ProductionFalse,"error","exclamation"),t.RuleNo=="9"){var i=n.dom.base.find('.mmc__product[data-productid*="MAD"]');i.addClass("mmc__disabled");n.dom.complete.find(".mmc__products .mmc__product.mmc__disabled").length==n.dom.complete.find(".mmc__products .mmc__product").length}});f.showRuleMessage(t,t.PostText,i.join(" "))},range:["1","2","3","4","6","9"]},productionAddon:{run:function(t){var i=["note"];t.Product&&t.Product.AskForProductCode&&(i.push("production"),n.settings.rules.production.MatchFoundTrue=function(i){n.trigger.target.addClass("mmc__check");f.showRuleMessage(t,t.ProductionTrue,"check","tick");i!=""&&t.Addon?f.showAddonProduct(t):f.hideAddonProduct(t)},n.settings.rules.production.MatchFoundFalse=function(){n.trigger.target.addClass("mmc__error");f.showRuleMessage(t,t.ProductionFalse,"error","exclamation");t.Addon&&f.hideAddonProduct(t)});f.showRuleMessage(t,t.PostText,i.join(" "))},range:["5"]},variant:{run:function(i){var r=["note"];i.Product&&i.Product.AskForTypeSignVariant&&(i.Variant==1?(n.vm.controls.showQuestion(!0),t.setStepIndex()):i.Variant==2&&r.push("variant"),n.settings.rules.variant.MatchFoundTrue||(n.settings.rules.variant.MatchFoundTrue=function(){if(n.trigger.target.addClass("mmc__check"),f.showRuleMessage(i,i.VariantTrue,"check","tick"),i.RuleNo=="7"){var t=n.dom.base.find('.mmc__product[data-productid*="MAL"]');n.vm.controls.buyProduct2(!0)}}),n.settings.rules.variant.MatchFoundFalse||(n.settings.rules.variant.MatchFoundFalse=function(){if(n.trigger.target.addClass("mmc__check"),f.showRuleMessage(i,i.VariantFalse,"error","exclamation"),i.RuleNo=="7"){var t=n.dom.base.find('.mmc__product[data-productid*="MAL"]');n.vm.controls.buyProduct2(!1);n.dom.complete.find(".mmc__products .mmc__product.mmc__disabled").length==n.dom.complete.find(".mmc__products .mmc__product").length}}));f.showRuleMessage(i,i.PostText,r.join(" "))},range:["7","12","103"]},variantAddon:{run:function(i){var r=["note"];i.Variant==1?(n.vm.controls.showQuestion(!0),t.setStepIndex()):i.Variant==2&&r.push("variant");n.settings.rules.variant.MatchFoundTrue=function(t){n.trigger.target.addClass("mmc__check");f.showRuleMessage(i,i.VariantTrue,"check","tick");n.dom.complete.find('.mmc__userMessage[data-rule="53"]').hide();n.dom.complete.find('.mmc__userMessage[data-rule="51"]').hide();t!=""?(f.showAddonProduct(n.settings.rules.list[t]),t=="51"?n.dom.complete.find('.mmc__userMessage[data-rule="51"]').show():n.dom.complete.find('.mmc__userMessage[data-rule="53"]').show()):f.hideAddonProduct(i)};n.settings.rules.variant.MatchFoundFalse=function(){n.trigger.target.addClass("mmc__error");f.showRuleMessage(i,i.VariantFalse,"error","exclamation");f.hideAddonProduct(i)};f.showRuleMessage(i,i.PostText,r.join(" "))},range:["51","53"]},customVariant:{run:function(i){var r=["note"];i.Variant==1?(n.vm.controls.showQuestion(!0),t.setStepIndex()):i.Variant==2&&r.push("variant");n.settings.rules.variant.MatchFoundTrue||(n.settings.rules.variant.MatchFoundTrue=function(){n.trigger.target.addClass("mmc__check");f.showRuleMessage(i,i.VariantTrue,"check","tick")});n.settings.rules.variant.MatchFoundFalse||(n.settings.rules.variant.MatchFoundFalse=function(){n.trigger.target.addClass("mmc__error");f.showRuleMessage(i,i.VariantFalse,"error","exclamation")});f.showRuleMessage(i,i.PostText,r.join(" "))},range:["50","601"]},customVariantAddon:{run:function(i){var r=["note"];i.Variant==1?(n.vm.controls.showQuestion(!0),t.setStepIndex()):i.Variant==2&&r.push("variant");n.settings.rules.variant.MatchFoundTrue||(n.settings.rules.variant.MatchFoundTrue=function(t){n.trigger.target.addClass("mmc__check");f.showRuleMessage(i,i.VariantTrue,"check","tick");t!=""&&t==i.RuleNo?f.showAddonProduct(i):f.hideAddonProduct(i)});n.settings.rules.variant.MatchFoundFalse||(n.settings.rules.variant.MatchFoundFalse=function(){n.trigger.target.addClass("mmc__error");f.showRuleMessage(i,i.VariantFalse,"error","exclamation");f.hideAddonProduct(i)});f.showRuleMessage(i,i.PostText,r.join(" "))},range:["52","500","501","502"]}};u.each(e,function(n,t){u.each(t.range,function(t,i){f["Rule"+i]=e[n].run})});this.RuleDefault=function(n){e.normal.run(n)};this.showRuleMessage=function(t,i,r){var f=n.dom.blocks.usermessage.clone(),e=[];if(u.each(r.split(" "),function(n,t){e.push("mmc__"+t)}),f.attr("data-rule",t.RuleNo),f.find(".mmc__userMessageTitle").remove(),f.find(".mmc__userMessageClose").remove(),f.find(".mmc__userMessageText").html(i),f.addClass(e.join(" ")),(r.match("variant")||r.match("production"))&&f.addClass("mmc__codeCheck"),u("#sb-container .mmc__infoPopup").length>0?f.appendTo(u("#sb-container .mmc__infoPopup .mmc__codeCheck")).show():n.dom.activeStep().hasClass("mmc__variant")?f.prependTo(n.dom.activeStep().find(".mmc__content")).show():f.insertBefore(n.dom.complete.find(".mmc__products")).show(),t.Product){if(t.Product.AskForTypeSignVariant&&t.Variant==2)return;if(!t.Product.AskForTypeSignVariant&&!t.Variant)return;if(t.Product.AskForProductCode&&t.Production==1)return;if(t.RuleNo.charAt(0)==5&&t.RuleNo.length==3)return}if(!t.Product){if(t.Variant==2)return;if(!t.Variant)return}n.dom.activeStep().hasClass("mmc__variant")||f.hide()};this.showAddonProduct=function(t){var r=n.vm.addon,i=t.Addon,u=i.Price?i.Price.HasDiscount?i.Price.ProductPriceDiscounted.PriceWithVAT:i.Price.ProductPrice.PriceWithVAT:i.PriceWithVAT,f=n.settings.percentDiscountAddon;if(i.ProductContent==null){n.vm.controls.showAddon(!1);return}r.VCE(i.VCE);r.Name(i.ProductContent.name);r.Desc(i.ProductContent.desc_short);r.ImageSrc(n.settings.directory+"content/images/products/"+i.VCE.replace(" ","-").toLowerCase()+".jpg");r.Price(n.formatPrice(u));t.AddonChecked==1?r.Checked(!0):r.Checked(!1);f===undefined&&(f=n.settings.percentDiscount);f!=null&&(u=(parseFloat(u)*((100-f)/100)).toFixed(2));r.productPrice(u);r.serviceProductID(i.ProductID);n.vm.controls.showAddon(!0)};this.hideAddonProduct=function(){n.vm.controls.showAddon(!1)};this.checkCode=function(){var r=n.trigger.target.find("input").val().toUpperCase(),i=n.trigger.target.closest(".mmc__codeCheck").hasClass("mmc__variant")?"variant":"production";(n.vm.config.product1[i+"code"](r),n.trigger.target.removeClass("mmc__error mmc__check"),n.dom.variant.find(".mmc__userMessage").remove(),u("#sb-container").find(".mmc__userMessage").remove(),r!="")&&(n.trigger.target.addClass("mmc__loading"),u.ajax({dataType:"jsonp",jsonpCallback:"jsonCallback",type:"GET",url:n.buildRequest(),success:function(r){var u=r,e=n.settings.rules;n.dom.complete.find(".mmc__userMessage.mmc__matchfound").hide().removeClass("mmc__matchfound");u.UnknownVariant||u.UnknownProductionCode?(n.trigger.target.addClass("mmc__error"),f.showRuleMessage("",e[i+"Unknown"],"error","exclamation")):u.MatchFound==!0?(e[i].MatchFoundTrue(u.MatchCompatibility.RuleNo),n.dom.activeStep().hasClass("mmc__variant")&&(u.MatchCompatibility.RuleNo&&u.MatchCompatibility.RuleNo!="103"?n.dom.complete.find('.mmc__userMessage[data-rule="'+u.MatchCompatibility.RuleNo+'"]').show().addClass("mmc__matchfound"):u.MatchCompatibility.RuleNo=="103"?n.dom.complete.find('.mmc__userMessage[data-rule="'+u.MatchCompatibility.RuleNo+'"]').hide():n.dom.complete.find(".mmc__userMessage.matchfound:not(.mmc__userMessage.mmc__codeCheck)").hide().removeClass("mmc__matchfound"))):u.MatchFound==!1&&(e[i].MatchFoundFalse(),n.dom.activeStep().hasClass("mmc__variant"));n.trigger.target.removeClass("mmc__loading");t.checkFilledSteps(n.vm.config.product1)},error:function(){}}))}}function loadConfiguratorFunctions(n,t,i,r){var u=this;this.initShadowbox=function(){Shadowbox.init({skipSetup:!0,animateFade:!1,displayNav:!0,handleOversize:"none",enableKeys:!1,onOpen:function(){r("div#sb-container div#sb-loading-inner span").text(r("div.mmc__siteSettings span.mmc__loadingText").text())},onFinish:function(){r("div.mmc__infoPopup").length>0&&(r("#sb-wrapper-inner").height(r("div.mmc__infoPopup").height()+80),r("div.mmc__infoPopup")[0].offsetHeight>r(t).height()&&(r("#sb-wrapper-inner").css({top:r(t).scrollTop()}),r("body").addClass("sb-scrollable")));r(".mmc__infoPopup").on({click:function(){Shadowbox.close()}},".mmc__shadowBoxClose")},onClose:function(){r("body").removeClass("sb-scrollable");r("#sb-wrapper-inner").removeAttr("style")}})};this.checkBrowser=function(n){return navigator.userAgent.match(n,"gi")?!0:!1};this.checkFilledSteps=function(t){var i=[];n.dom.step.removeClass("mmc__filled mmc__next");t.windowtype()&&t.windowsize()&&i.push("windows");t.category()&&i.push("category");t.operation()&&i.push("operation");t.outersurface()&&i.push("outersurface");t.colour()&&i.push("colour");t.finishtype()&&i.push("finishtype");t.variantcode()&&n.dom.variant.hasClass("mmc__required")&&n.dom.variant.find(".mmc__codeCheck").hasClass("mmc__check")&&i.push("variant");t.insectWidth()&&t.insectHeight()&&i.push("insect");r.each(i,function(t,i){n.dom[i].addClass("mmc__filled")});n.dom.options.find(".mmc__configStep.mmc__filled:last").nextAll(".mmc__required:first").addClass("mmc__next")};this.setStepIndex=function(){r.each(n.dom.options.find(".mmc__configStep.mmc__required"),function(n,t){r(t).find(".mmc__stepIndex td").text(n+1)})};this.checkObservableValue=function(n,t){for(var r=!0,i=0,u=n().length;i<u;i++)if(n()[i].val==t){r=!1;break}return r};this.zoomIllustration=function(n){function y(){e=n.offset().top;e-=r(t).scrollTop();s=n.offset().left;l=n.width()}function p(){y();r(".mmc__illustrationZoom img").animate({left:s,top:e,width:l,opacity:0},500);r(".mmc__illustrationZoom div.mmc__close").remove();r(".mmc__illustrationZoom div.mmc__background").animate({opacity:0},500,function(){r(".mmc__illustrationZoom").remove()})}var f,v,o,s,h,e,c,l,i,u,a;f=n.attr("src");f=f.split("illustrations/");v=n.attr("alt");o='<img src="'+f[0]+"illustrations/large/"+f[1]+'" alt="'+v+'" />';r(o).load(function(){y();r("body").prepend('<div class="mmc__illustrationZoom"><div class="mmc__close"><div class="mmc__border mmc__left">&nbsp;<\/div><div class="mmc__border mmc__right">&nbsp;<\/div>X<\/div><div class="mmc__background">&nbsp;<\/div>'+o+"<\/div>");i=r(".mmc__illustrationZoom img").width();u=r(".mmc__illustrationZoom img").height();u>r(t).height()&&(a=r(t).height()/u-.05,i=i*a,u=u*a);h=r(t).width()/2-i/2;c=r(t).height()/2-u/2;r(".mmc__illustrationZoom div.mmc__background").css({opacity:0});r(".mmc__illustrationZoom div.mmc__background").animate({opacity:.7},500);r(".mmc__illustrationZoom img").css({left:s,top:e,width:l,opacity:0});r(".mmc__illustrationZoom img").animate({left:h,top:c,width:i,opacity:1},500,function(){r(".mmc__illustrationZoom div.mmc__close").css({left:h+i+r(".mmc__illustrationZoom div.mmc__border").outerWidth(),top:c})});r(".mmc__illustrationZoom div.mmc__close").bind("click",function(){p()})}).error(function(){})};this.updateIllustration=function(){if(n.settings.turning!=!0){var e=n.vm.config,t={},i,f;n.trigger.type=="turn"&&(n.settings.defaultImg=n.settings.defaultImg=="product1"?"product2":"product1");r.each(e,function(i,r){n.vm.controls.showCombination()==!0&&(f=i.replace("product","")-1,n.trigger.type!="turn"&&(n.settings.defaultImg="product"+n.trigger.target.closest(".mmc__options").attr("data-product")));t[i]={category:n.vm.controls.showCombination()==!0?r.category().match(/[A-Z]*[^A-Z]+/g)[f]:r.category(),operation:r.operation(),colour:r.category()=="Shutters"?r.outersurface():r.colour()}});i=u.getIllustrationURL(t[n.settings.defaultImg]);n.dom.selection.find(".mmc__window .mmc__newImg").append(i);u.swapIllustrations()}};this.getIllustrationURL=function(t){function f(){u.attr("src",n.settings.ill.loc()+i.join("-")+".png").attr("alt",i.join(" ")).load().error(function(){if(t.colour)i.splice(1,1),delete t.colour;else if(t.operation)i.splice(1,1),delete t.operation;else if(i.indexOf("window")===-1)i=["window"];else return!1;f(u)})}var u=r("<img />"),i=[];return t.category?(t.category&&i.push(t.category),t.operation&&i.push(t.operation),t.colour&&i.push(t.colour)):i.push("window"),f(),u};this.swapIllustrations=function(){var i=n.dom.selection.find(".mmc__window"),t=i.find(".mmc__oldImg"),u=i.find(".mmc__newImg");n.settings.turning=!0;t.find("img").fadeOut(500,function(){t.empty()});u.find("img").fadeIn(500,function(){r(this).appendTo(t);n.settings.turning=!1})};this.switchStep=function(t){if(n.sliding==!0)return!1;n.settings.onBeforeSwitchStep();var i=n.dom.activeStep(),f=t?t:r(i.nextAll(".mmc__required")[0]);i.hasClass("mmc__filled")||f.hasClass("mmc__filled")&&!i.hasClass("mmc__window")?(n.sliding=!0,i.find(".mmc__content").slideUp(500,"linear",function(){r(this).closest(".mmc__configStep").removeClass("mmc__active");n.sliding=!1}),f.find(".mmc__content").slideDown(500,"linear",function(){r(this).closest(".mmc__configStep").addClass("mmc__active");n.settings.onAfterSwitchStep()}),n.dom.selection.animate({marginTop:n.measure.stepHeight*f.index(".mmc__required")},500,"linear"),i.find(".mmc__userMessage").length>0&&i.data("type")!="complete"&&u.hideMessage(),f.hasClass("mmc__complete")?n.dom.selection.find(".mmc__product:not(.mmc__product.mmc__hidden)").slideUp(500,"linear",function(){n.vm.controls.showSelectionProducts(!1)}):(n.vm.controls.showSelectionProducts(!0),n.dom.activeStep().hasClass("mmc__complete")&&n.dom.selection.find(".mmc__product:not(.mmc__product.mmc__hidden)").hide(),n.dom.selection.find(".mmc__product:not(.mmc__product.mmc__hidden)").slideDown(500,"linear"))):u.showMessage()};this.resetSteps=function(){var i=n.trigger.target.closest(".mmc__configStep").nextAll().not(".mmc__complete"),u=n.vm.data,f=n.vm.config,t;r.each(i,function(n,i){t=r(i).data("type");r.each(u,function(n,i){i[t]&&i[t].removeAll();t=="insectnet"&&(i.insectWidth.removeAll(),i.insectHeight.removeAll())});r.each(f,function(n,i){i[t]&&i[t]("");t=="insectnet"&&(i.insectWidth(""),i.insectHeight(""))})});n.vm.controls.showQuestion(!1)};this.selectWindowInput=function(){var t=n.vm.config.product1;t.windowtype()||t.windowsize()?t.windowtype()&&!t.windowsize()?(u.hideInfoTooltip(),n.dom.windows.find("select#windowtype").trigger("chosen:updated"),n.dom.windows.find("select#windowsize").removeAttr("mmc__disabled").trigger("chosen:updated"),n.dom.windows.find(".mmc__select.mmc__size a").mousedown()):t.windowtype()&&t.windowsize()&&(n.dom.windows.find("select#windowtype, select#windowsize").removeAttr("disabled").trigger("chosen:updated"),n.dom.windows.find(".mmc__buttonBar .mmc__button a").focus()):n.dom.windows.find("select#windowtype").trigger("chosen:updated")};this.showMessage=function(i,f){function e(t){n.dom.message.text().find("ul").append("<li>"+t+"<\/li>")}var o=n.vm.config,s=n.dom.activeStep().data("type");n.dom.activeStep().find(".mmc__userMessage").length>0&&u.hideMessage(0);n.dom.activeStep().find(".mmc__content").append(n.dom.blocks.usermessage.clone());n.dom.message.base().addClass(f);n.dom.message.text().text("");n.dom.message.text().append("<ul><\/ul>");i!=undefined?e(i):s=="window"?(o.product1.windowtype()||e(n.dom.windows.find("div.mmc__select.mmc__type label").text()),o.product1.windowsize()||e(n.dom.windows.find("div.mmc__select.mmc__size label").text())):(i=n.dom.selection.find(".mmc__product:first .mmc__productRow.mmc__selection.mmc__"+s+" span.mmc__type").text().trim(),i.charAt(i.length-1)==":"&&(i=i.slice(0,-1)),e(i));n.dom.activeStep().find(".mmc__content").offset().top<r(t).scrollTop()?(offset=r(t).scrollTop(),offset-=n.dom.activeStep().find(".mmc__content").offset().top,n.dom.message.base().css("marginTop",offset)):n.dom.message.base().css("marginTop","auto");n.dom.message.base().fadeIn(200)};this.hideMessage=function(t){n.dom.base.find(".mmc__userMessage:not(.mmc__configStep.mmc__complete .mmc__userMessage)").fadeOut(t===undefined?200:t,function(){r(this).remove()})};this.showOptionTooltip=function(){if(n.settings.tooltip.timeout&&(clearTimeout(n.settings.tooltip.timeout),n.settings.tooltip.timeout=null),n.settings.tooltip.open&&n.trigger.target.closest(".mmc__option").find(".mmc__tooltip").length>0){clearTimeout(n.settings.tooltip.open);n.settings.tooltip.open=null;return}n.settings.tooltip.timeout=setTimeout(function(){var i=n.dom.activeStep().hasClass("mmc__operation")?n.vm.config[n.trigger.target.closest(".mmc__options").attr("class").replace("mmc__options","").replace(" ","").replace("mmc__","")].category():"";n.vm.controls.showCombination()==!0&&i&&(i=i.match(/[A-Z]*[^A-Z]+/g)[n.trigger.target.closest(".mmc__options").attr("data-product")-1]);n.trigger.target.closest(".mmc__option").append(n.dom.blocks.tooltip.clone());n.dom.tooltip=n.trigger.target.closest(".mmc__option").find(".mmc__tooltip");n.dom.tooltip.find(".mmc__tooltipImage img").attr("src",n.settings.directory+"content/"+{category:"images/configurator/blindtype/",colour:"images/colours/large/",operation:"images/configurator/operation/",outersurface:"images/configurator/surface/",finishtype:"images/configurator/addon/"}[n.trigger.type]+i+n.trigger.target.val()+".png");n.dom.tooltip.find(".mmc__tooltipDescription .mmc__tooltipTitle").html(n.trigger.target.closest(".mmc__option").find(".mmc__optionTitle").text());n.dom.tooltip.find(".mmc__tooltipDescription .mmc__tooltipInfo").html(n.trigger.target.closest(".mmc__option").find(".mmc__optionDesc").text());n.dom.tooltip.fadeIn(navigator.userAgent.match(/MSIE 7/gi)||navigator.userAgent.match(/MSIE 8/gi)?0:300);n.settings.tooltip.optionOffset=n.dom.tooltip.find(".mmc__tooltipImage").offset();n.settings.tooltip.tooltipWidth=n.dom.tooltip.find(".mmc__tooltipDescription").width();n.trigger.type=="colour"&&(n.settings.tooltip.tooltipWidth+=n.dom.tooltip.find(".mmc__tooltipImage").outerWidth());n.settings.tooltip.optionRightOffset=n.settings.tooltip.optionOffset.left;n.settings.tooltip.optionRightOffset+=n.settings.tooltip.tooltipWidth;n.settings.tooltip.optionRightOffset+=5;n.settings.tooltip.optionTopOffset=n.settings.tooltip.optionOffset.top;n.settings.tooltip.optionTopOffset-=r(t).scrollTop();n.settings.tooltip.optionOffset.left<0&&(n.trigger.type=="colour"?n.dom.tooltip.offset({left:n.dom.tooltip.find(".mmc__tooltipImage").width()/2}).addClass("mmc__alignLeft"):n.dom.tooltip.offset({left:5}));n.settings.tooltip.optionRightOffset>r(t).width()&&(n.trigger.type=="colour"?n.settings.tooltip.tooltipWidth-=n.dom.tooltip.find(".mmc__tooltipImage").width()/2-10:n.dom.tooltip.addClass("mmc__alignRight"),n.dom.tooltip.offset({left:r(t).width()-n.settings.tooltip.tooltipWidth-5}));n.dom.tooltip.hasClass("mmc__alignRight")&&(n.settings.tooltip.optionTopOffset-=n.dom.tooltip.find(".mmc__tooltipImage").height()/2+20);n.settings.tooltip.optionTopOffset<0&&(n.trigger.type=="colour"?(n.settings.tooltip.optionTopOffset=n.dom.tooltip.hasClass("mmc__alignLeft")?n.dom.tooltip.offset().top+n.dom.tooltip.outerHeight()+164:n.dom.tooltip.offset().top+n.dom.tooltip.outerHeight()+100,n.dom.tooltip.offset({top:n.settings.tooltip.optionTopOffset})):n.dom.tooltip.addClass("mmc__alignBottom"));n.settings.tooltip.timeout=null;n.settings.tooltip.open=!0},400)};this.hideOptionTooltip=function(){n.settings.tooltip.timeout&&(clearTimeout(n.settings.tooltip.timeout),n.settings.tooltip.timeout=null);var t=n.trigger.target.closest(".mmc__option").find(".mmc__tooltip");n.settings.tooltip.open=setTimeout(function(){t.remove()},1)};this.showInfoTooltip=function(){var i=n.trigger.target.css("marginLeft")=="auto"?"0":parseFloat(n.trigger.target.css("marginLeft"));n.dom.base.append(n.dom.blocks.infotip.clone());n.dom.infotip=n.dom.base.find(".mmc__infotip");n.settings.infotip.message=n.trigger.target.find(".mmc__message").text()!=""?n.trigger.target.find(".mmc__message").text():n.settings.infotipMessage;n.dom.infotip.find(".mmc__infotipMessage").text(n.settings.infotip.message);n.dom.infotip.show().css({top:n.trigger.target.offset().top-(n.dom.infotip.height()+10)-n.dom.base.offset().top+10,left:n.trigger.target.offset().left+(n.trigger.target.width()-i-n.dom.infotip.find(".mmc__border").width()-n.dom.infotip.width())/2-n.dom.base.offset().left+10});n.settings.infotip.offsetRight>r(t).width()?(n.dom.infotip.addClass("mmc__right"),n.dom.infotip.removeAttr("mmc__style")):n.settings.infotip.offsetLeft<0&&(n.dom.infotip.addClass("mmc__left"),n.dom.infotip.removeAttr("mmc__style"))};this.hideInfoTooltip=function(){n.dom.infotip!=null&&n.dom.infotip.remove();n.dom.infotip=null};this.clearCompleteStep=function(){n.vm.controls.showAddon(!1);n.settings.rules.list={};r.each(n.settings.rules.variant,function(t){n.settings.rules.variant[t]=null});r.each(n.settings.rules.production,function(t){n.settings.rules.variant[t]=null});n.dom.complete.find(".mmc__product").removeClass("mmc__disabled");n.dom.complete.find(".mmc__userMessage").remove()};this.sendProductsByMail=function(t){var u;t.preventDefault();var o={subject:n.dom.complete.find(".mmc__contentSubTitle").text(),title:n.dom.complete.find(".mmc__contentTitle").text(),subtitle:n.dom.complete.find(".mmc__contentSubTitle").text(),recipient:r(".mmc__mailerPopup input").val(),image:n.dom.selection.find(".mmc__window div.mmc__oldImg img").attr("src")},c=[],l=[],i=[],s=[],f=[],e,h=r(".mmc__mailerPopup .mmc__sendingStatus");if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.recipient))return!1;n.trigger.type="sendmail";n.dom.complete.find(".mmc__userMessage:visible").length>0&&(r.each(n.dom.complete.find(".mmc__userMessage"),function(t,i){c.push('"'+r(i).data("rule")+'":"'+n.settings.rules.list[r(i).data("rule")].PostText+'"')}),o.usermessages="{"+c.join(",")+"}");r.each(n.dom.complete.find(".mmc__product:not(.mmc__product.mmc__addon)"),function(n,t){s=[];r.each(r(t).find(".mmc__productRow:visible"),function(n,t){e=r(t).attr("class").replace("mmc__productRow","").replace("mmc__ticked","").replace("mmc__selection","").trim();i=[];e=="placement"?i.push('"val":"'+r(t).find("span:visible").text()+'"'):e=="title"?i.push('"val":"'+(r(t).find("span.mmc__type").text()+" "+r(t).find("span.mmc__value").text()).trim()+'"'):e=="campaigntext"||(e=="price"?(i.push('"from":"'+r(t).find("div.mmc__label").text()+'"'),i.push('"price":"'+r(t).find("div.mmc__amount").text().replace(r(t).find("div.mmc__amount span.mmc__from").text(),"").trim()+'"')):r(t).hasClass("mmc__selection")&&(i.push('"title":"'+r(t).find("span.mmc__type").text()+'"'),i.push('"val":"'+r(t).find("span.mmc__value").text()+'"')));s.push('"'+e+'":{'+i.join(",")+"}")});l.push('"'+n+'":{'+s.join(",")+"}")});o.products="{"+l.join(",")+"}";n.dom.complete.find(".mmc__product.mmc__addon:visible").length>0&&(u=n.dom.complete.find(".mmc__product.mmc__addon"),f.push('"product":"'+(u.find(".mmc__productRow.mmc__title span.mmc__type").text()+" "+u.find(".mmc__productRow.mmc__title span.mmc__value").text()).trim()+'"'),f.push('"title":"'+u.find(".mmc__productName").text()+'"'),f.push('"desc":"'+u.find(".mmc__productDesc").text()+'"'),f.push('"priceLabel":"'+u.find(".mmc__productRow.mmc__price div.mmc__label").text()+'"'),f.push('"price":"'+u.find(".mmc__productRow.mmc__price div.mmc__amount").text().replace(u.find(".mmc__productRow.mmc__price span.mmc__from").text(),"").trim()+'"'),o.addon="{"+f.join(",")+"}");h.addClass("mmc__sending");r.ajax({dataType:"jsonp",jsonpCallback:"jsonCallback",type:"GET",url:n.buildRequest(),data:o,success:function(){h.addClass("mmc__success").removeClass("mmc__sending")},error:function(){h.addClass("mmc__fail").removeClass("mmc__sending")}})}}function configuratorLoaded(){return!0}jQuery.noConflict(),function(n,t,i){i(t).ready(function(){var s,r;(navigator.userAgent.match(/MSIE 7/gi)||navigator.userAgent.match(/MSIE 8/gi)||navigator.userAgent.match(/MSIE 9/gi))&&(n.console={log:function(){}});s=new Date;r={dom:{base:i("#mmc__Configurator"),options:i("#mmc__Options"),title:i("#mmc__Options .mmc__titleBar"),selection:i("#mmc__Selection"),step:i("#mmc__Options .mmc__configStep"),activeStep:function(){return r.dom.options.find(".mmc__configStep.mmc__active")},windows:i("#mmc__Options .mmc__configStep.mmc__window"),category:i("#mmc__Options .mmc__configStep.mmc__category"),insect:i("#mmc__Options .mmc__configStep.mmc__insectnet"),operation:i("#mmc__Options .mmc__configStep.mmc__operation"),outersurface:i("#mmc__Options .mmc__configStep.mmc__outersurface"),colour:i("#mmc__Options .mmc__configStep.mmc__colour"),finishtype:i("#mmc__Options .mmc__configStep.mmc__finishtype"),variant:i("#mmc__Options .mmc__configStep.mmc__variant"),complete:i("#mmc__Options .mmc__configStep.mmc__complete"),edit:i(".mmc__productRow span.mmc__edit a"),option:function(n,t,i){var u=n?t?".mmc__option."+t+"."+n+"."+i:".mmc__option."+n+"."+i:"";return r.dom.options.find(u)},inactive:i(".mmc__option.mmc__inactive"),sliding:!1,updating:!1,insectSelect:i("#mmc__Options .mmc__insectNetTypes label, #mmc__Options .mmc__insectNetTypes button"),blocks:{updating:i("#mmc__Configurator #mmc__Blocks .mmc__updatingOverlay"),usermessage:i("#mmc__Configurator #mmc__Blocks .mmc__userMessage"),tooltip:i("#mmc__Configurator #mmc__Blocks .mmc__tooltip"),infotip:i("#mmc__Configurator #mmc__Blocks .mmc__infotip"),windowtypesize:i("#mmc__Configurator #mmc__Blocks .mmc__windowTypeSize"),mailerPopup:i("#mmc__Configurator #mmc__Blocks .mmc__mailerPopup")},tooltip:"",infotip:null,message:{base:function(){return r.dom.activeStep().find(".mmc__userMessage")},title:function(){return r.dom.message.base().find(".mmc__userMessageTitle")},text:function(){return r.dom.message.base().find(".mmc__userMessageText")},icon:function(){return r.dom.message.base().find(".mmc__userMessageIcon")},close:function(){return r.dom.message.base().find(".mmc__userMessageClose")}}},trigger:{target:"",type:""},request:{href:generalSettings.environment+"?option=com_configurator",did:function(){return r.settings.did},cid:function(){return r.settings.cid},lang:function(){return r.settings.language},format:"json",combi:function(){return r.vm.controls.showCombination()==!0?!0:!1},task:function(){var n=r.vm.config.product1;return r.trigger.type=="codeCheck"?"mmc.validateProductFit":r.trigger.type=="sendmail"?"mmc.sendConfiguratorEmail":"mmc.Configure"},data:{1:{windowtype:function(){return r.vm.config.product1.windowtype()},windowsize:function(){return r.trigger.type=="windowtype"?"":r.vm.config.product1.windowsize()},category:function(){return r.isBasket()?encodeURI(r.vm.config.product1.categoryText()):!r.vm.config.product1.windowtype()||!r.vm.config.product1.windowsize()?"":r.vm.controls.showCombination()?r.vm.config.product1.category()+r.vm.config.product1.category().match(/[A-Z][a-z]+/g)[0]:r.vm.config.product1.category()},operation:function(){return r.isBasket()?encodeURI(r.vm.config.product1.operationText()):r.vm.config.product1.operation()},finishtype:function(){return r.isBasket()?encodeURI(r.vm.config.product1.finishtypeText()):r.vm.config.product1.finishtype()},colour:function(){return r.isBasket()?encodeURI(r.vm.config.product1.colourText()):r.vm.config.product1.colour()},outersurface:function(){return r.isBasket()?encodeURI(r.vm.config.product1.outersurfaceText()):r.vm.config.product1.outersurface()},openingwidth:function(){return r.isBasket()?encodeURI(r.vm.config.product1.insectWidthText()):r.vm.config.product1.insectWidth()},openingheight:function(){return r.isBasket()?encodeURI(r.vm.config.product1.insectHeightText()):r.vm.config.product1.insectHeight()},productid:function(){if(r.isBasket())return r.vm.config.product1.serviceProductID()},categorynodeid:function(){if(r.isBasket()&&r.vm.controls.showCombination())return r.vm.config.product1.category()},productprice:function(){if(r.isBasket())return r.vm.config.product1.productPrice()},configuratorType:function(){if(!r.isBasket())return r.vm.config.product1.configureType()}},2:{windowtype:function(){return r.vm.config.product2.windowtype()},windowsize:function(){return r.trigger.type=="windowtype"?"":r.vm.config.product2.windowsize()},category:function(){return r.isBasket()?encodeURI(r.vm.config.product2.categoryText()):!r.vm.config.product2.windowtype()||!r.vm.config.product2.windowsize()?"":r.vm.controls.showCombination()?r.vm.config.product2.category()+r.vm.config.product2.category().match(/[A-Z][a-z]+/g)[1]:r.vm.config.product2.category()},operation:function(){return r.isBasket()?encodeURI(r.vm.config.product2.operationText()):r.vm.config.product2.operation()},finishtype:function(){return r.isBasket()?encodeURI(r.vm.config.product2.finishtypeText()):r.vm.config.product2.finishtype()},colour:function(){return r.isBasket()?encodeURI(r.vm.config.product2.colourText()):r.vm.config.product2.colour()},outersurface:function(){return r.isBasket()?encodeURI(r.vm.config.product2.outersurfaceText()):r.vm.config.product2.outersurface()},openingwidth:function(){return r.isBasket()?encodeURI(r.vm.config.product1.insectWidthText()):r.vm.config.product2.insectWidth()},openingheight:function(){return r.isBasket()?encodeURI(r.vm.config.product2.insectHeightText()):r.vm.config.product2.insectHeight()},productid:function(){if(r.isBasket())return r.vm.config.product2.serviceProductID()},categorynodeid:function(){if(r.isBasket()&&r.vm.controls.showCombination())return r.vm.config.product2.category()},productprice:function(){if(r.isBasket())return r.vm.config.product2.productPrice()},configuratorType:function(){if(!r.isBasket())return r.vm.config.product2.configureType()}},3:{windowtype:function(){return r.vm.config.product1.windowtype()},windowsize:function(){return r.trigger.type=="windowtype"?"":r.vm.config.product1.windowsize()},productid:function(){if(r.isBasket())return r.vm.addon.serviceProductID()},productprice:function(){if(r.isBasket())return r.vm.addon.productPrice()},description:function(){if(r.isBasket())return r.vm.addon.Name()}}}},isBasket:function(){return r.trigger.type=="gotobasket"?!0:!1},formatPrice:function(n){var u,t,f,i,e;for(u=n.split(".")[0],t=n.split(".")[1],f=[],i=u.length,e=0;i>e;i-=3)f.unshift(u.substring(i,i-3));return t&&(t.length>2?t=t.slice(0,2):t.length==1&&(t=t+"0"),t=r.settings.decimalNum==0?"":r.settings.sepD+t.slice(0,t.length-(2-r.settings.decimalNum))),f.join(r.settings.sepT)+'<span class="mmc__decimals">'+t+"<\/span>"},setActiveStep:function(){var n=i(r.dom.options.find(".mmc__configStep.mmc__required:not(.mmc__filled)")[0]);n.find(".mmc__content").show();n.addClass("mmc__active");n.hasClass("mmc__complete")&&r.dom.selection.find(".mmc__product").hide();r.dom.selection.css("marginTop",r.measure.stepHeight*r.dom.activeStep().index(".mmc__required"))},buildRequest:function(){var u=r.request,t=[],n=[];return i.each(u,function(u,f){u!="href"&&(typeof f!="object"?f&&typeof f!="function"?t.push(u+"="+f):f&&typeof f=="function"&&t.push(u+"="+f()):r.trigger.type=="codeCheck"?(n.push('"windowtype":"'+r.vm.config.product1.windowtype()+'"'),n.push('"windowsize":"'+r.vm.config.product1.windowsize()+'"'),r.trigger.target.hasClass("mmc__variant")?(n.push('"productid":"'+r.settings.rules.variant.ID+'"'),n.push('"variantcode":"'+r.vm.config.product1.variantcode()+'"')):(n.push('"productid":"'+r.settings.rules.production.ID+'"'),n.push('"productioncode":"'+r.vm.config.product1.productioncode()+'"'))):i.each(f,function(t,u){if(!r.vm.controls.showProduct2()||(t!=1||r.vm.controls.buyProduct1())&&(t!=2||r.vm.controls.buyProduct2())&&(t!=3||r.vm.controls.buyProductAddon())){if(r.isBasket()){if(t==2&&!r.vm.controls.showProduct2()&&!r.vm.controls.showCombination()||t==3&&!r.vm.addon.Checked())return}else if(t==2&&!r.vm.controls.showProduct2()&&!r.vm.controls.showCombination()||t==2&&r.vm.config.product1.windowtype()=="GDL"||t==3&&!r.vm.controls.showAddon())return;var f=[],e=r.settings.basketType=="veluxshop"?"product"+t:t;i.each(u,function(n,t){t()&&t()!="undefined"&&f.push('"'+n+'":"'+t()+'"')});n.push('"'+e+'":{'+f.join(",")+"}")}}))}),r.isBasket()?"{"+n.join(",")+"}":u.href+"&"+t.join("&")+"&data={"+n.join(",")+"}"},options:["windowtype","windowsize","category","operation","finishtype","colour","outersurface","insectWidth","insectHeight"],measure:{stepHeight:i("#mmc__Options .mmc__titleBar").height()+parseInt(i("#mmc__Options .mmc__configStep").css("marginBottom"))},settings:{doNotHide:!1,defaultImg:"product1",sepT:".",sepD:",",decimalNum:2,closeText:i("#mmc__Settings .mmc__setCloseText").text(),noResultsText:i("#mmc__Settings .mmc__setNoResultsText").text(),insect:{widthPreText:i("#mmc__Settings .mmc__setInsectNetWidthPretext").text()+" ",heightPreText:i("#mmc__Settings .mmc__setInsectNetHeightPretext").text()+" ",postText:" "+i("#mmc__Settings .mmc__setInsectNetMeasurementText").text(),widths:{BZ:i("#mmc__Settings .mmc__setInsectNetWidthBZ").text(),CZ:i("#mmc__Settings .mmc__setInsectNetWidthCZ").text(),FZ:i("#mmc__Settings .mmc__setInsectNetWidthFZ").text(),MZ:i("#mmc__Settings .mmc__setInsectNetWidthMZ").text(),PZ:i("#mmc__Settings .mmc__setInsectNetWidthPZ").text(),SZ:i("#mmc__Settings .mmc__setInsectNetWidthSZ").text(),UZ:i("#mmc__Settings .mmc__setInsectNetWidthUZ").text()},height:"",measurement:i("#mmc__Settings .mmc__setInsectNetMeasurement").text()?parseInt(i("#mmc__Settings .mmc__setInsectNetMeasurement").text()):1,sizes:{},type:"double",shape:function(){return r.dom.insect.find(".mmc__option.mmc__active").attr("id").replace("mmc__","")}},selectTypeText:i("#mmc__Settings .mmc__setSelectTypeText").text(),selectSizeText:i("#mmc__Settings .mmc__setSelectSizeText").text(),flatroofSizes:["CVP","CFP"],country:"IT",tooltip:{},infotip:{},infotipMessage:i("#mmc__Settings .mmc__setDefaultTooltipMessage").text(),showInactive:!1,rules:{list:{},timeout:null,product:{},variant:{MatchFoundFalse:null,MatchFoundTrue:null,ID:null},production:{MatchFoundFalse:null,MatchFoundTrue:null,ID:null},variantUnknown:"",productionUnknown:""},ill:{loc:function(){return r.settings.illustrationsDirectory?r.settings.illustrationsDirectory:r.settings.directory+"content/images/configurator/illustrations/"}},categoriesOrder:i("#mmc__Settings .mmc__categoriesOrder").text().split(",").slice(0,-1)},vm:{},init:function(){function f(){var n=r.dom.base.width(),t=n-r.dom.options.width()-parseInt(r.dom.selection.css("paddingLeft"))-parseInt(r.dom.selection.css("paddingRight"));n<914?r.dom.selection.addClass("mmc__hidden").removeClass("mmc__thin"):n>=914&&n<984?(r.dom.selection.removeClass("mmc__hidden").addClass("mmc__thin").width(t),r.dom.selection.find(".mmc__content").width(t)):n>=984&&(r.dom.selection.removeAttr("class").width(""),r.dom.selection.find(".mmc__content").removeAttr("style"))}r.settings.onBeforeInit();var e=r.vm.config.product1,t=n.location.search;i(r.settings.target).find("#mmc__Configurator").removeAttr("style");f();i(n).resize(f);r.dom.options.find("select").chosen({width:"100%",no_results_text:r.settings.noResultsText});u.setStepIndex();r.dom.windows.find(".mmc__select.mmc__type input:first, .mmc__select.mmc__size input:first").attr("autocomplete","off");r.dom.windows.find(".mmc__select.mmc__type input:first").attr("tabindex","1");r.dom.windows.find(".mmc__select.mmc__size input:first").attr("tabindex","2");r.dom.windows.find(".mmc__buttonBar .mmc__button a").attr("tabindex","3");r.dom.windows.find(".mmc__select.type input:first").val("");r.dom.windows.find(".mmc__select.size input:first").val("");t=t.slice(1,t.length).split("&");i.each(t,function(n,t){var i=t.split("=")[0],u=t.split("=")[1];i=i=="blindtype"?"category":i;(i=="windowtype"||i=="windowsize")&&r.vm.data.product1[i].push({val:u,name:u});try{e[i](u)}catch(f){}});r.settings.onAfterInit();r.update();r.setActiveStep()},update:function(){var n=r.vm.config.product1,t,f,e=new Date;if(r.settings.rules.product={},r.dom.activeStep().append(r.dom.blocks.updating.clone()),r.dom.activeStep().addClass("mmc__updating"),r.isBasket())return!1;r.vm.controls.showCombination()?r.vm.config.product2.category(n.category()):i.each(r.options,function(n,t){t!="insectHeight"&&r.vm.config.product2[t](r.vm.config.product1[t]())});r.settings.onBeforeUpdate();i.ajax({dataType:"jsonp",jsonpCallback:"jsonCallback",type:"GET",url:r.buildRequest(),success:function(t){t4=new Date;var f=t;i.each(f,function(n,t){i.each(t,function(t,u){i.each(u,function(i,u){r.process[t]("product"+(n+1),u)})})});r.dom.base.removeClass("mmc__loading");r.settings.loadingTitle&&i(r.settings.target).find("#mmc__LoadingConfigurator").remove();r.settings.doNotHide==!1&&(r.dom.activeStep().removeClass("mmc__updating"),r.dom.activeStep().find(".mmc__updatingOverlay").remove());r.settings.onAfterUpdate();r.settings.doNotHide=!1;u.updateIllustration(n)},error:function(){}});r.settings.insect.height&&(r.dom.insect.find('select[name="insectHeight"]').val(r.settings.insect.height),r.settings.insect.height=null,r.dom.insect.find("select").trigger("chosen:updated"));u.checkFilledSteps(n);u.setStepIndex();t=r.dom.options.find(".mmc__configStep").length-1;f=r.dom.options.find(".mmc__configStep.mmc__filled").length;t==f?n.showPrice(!0):n.showPrice(!1);r.dom.selection.css("marginTop",r.measure.stepHeight*r.dom.activeStep().index(".mmc__required"))},process:{WindowTypes:function(n,t){var f=r.vm.data,e=r.vm.config;r.vm.config.product1.windowtype()!=""&&f.product1.windowtype().length>2&&r.trigger.type||(t.length||(t=[t]),i.each(f,function(n,u){var f=0;i.each(t,function(n,t){(r.vm.controls.showOnlyFlatroof()===!0&&i.inArray(t.WindowID,["CVP","CFP"])!=-1||r.vm.controls.showOnlyFlatroof()===!1)&&(u.windowtype()[++f]={val:t.WindowID,name:t.WindowID})});u.windowtype.valueHasMutated()}),e.product1.windowtype()!=""&&r.dom.windows.find('select#windowtype option[value="'+e.product1.windowtype()+'"]').attr("selected","selected"),u.selectWindowInput())},WindowSizes:function(n,t){var f=r.vm.data,e=r.vm.config;r.vm.config.product1.windowsize()!=""&&f.product1.windowsize().length>2&&r.trigger.type||(t.length||(t=[t]),i.each(f,function(n,r){var u=0;i.each(t,function(n,t){r.windowsize()[++u]={val:t.SizeID,name:t.SizeID}});r.windowsize.valueHasMutated()}),e.product1.windowsize()!=""&&r.dom.windows.find('select#windowsize option[value="'+e.product1.windowsize()+'"]').attr("selected","selected"),u.selectWindowInput())},ValidatedCategory:function(n,t){var e=r.vm.data,f=r.vm.config,o=r.dom.option(f[n].category(),"mmc__category","mmc__active").data("parent");(i.each(t,function(t,r){i.each(r.ChildCategories,function(t,r){i.each(r,function(t,i){try{i.CategoryName==f[n].category()&&i.MatchFound==!1&&i.CategoryName!="InsectNet"&&(u.resetSteps(),u.checkFilledSteps(f[n]))}catch(r){}})})}),r.vm.config[n].category()!=""&&r.vm.data[n].category().length>0&&r.trigger.type)||(i.each(t,function(n,t){i.inArray(t.CategoryName,["BLINDS","FLATROOFBLINDS","COMBINATION"])!=-1&&i.each(t.ChildCategories,function(n,u){i.each(e,function(n,f){u=u.length?u:[u];i.each(u,function(n,u){if(i.inArray(r.vm.config.product1.windowtype(),r.settings.flatroofSizes)==-1&&!u.CategoryName.match(/flatroof/gi)||i.inArray(r.vm.config.product1.windowtype(),r.settings.flatroofSizes)!=-1&&u.CategoryName.match(/flatroof/gi)){var e=r.vm.config.product1.windowtype().trim();(u.MatchFound||!u.MatchFound&&r.settings.showInactive||u.CategoryName=="InsectNet")&&(e!="GDL"||t.CategoryName!="COMBINATION")&&f.category.push({val:u.CategoryName,name:u.Name,desc:u.Description,parent:t.CategoryName,inactive:u.MatchFound||u.CategoryName=="InsectNet"?"":"inactive",order:r.settings.categoriesOrder.indexOf(u.CategoryName)})}});r.settings.categoriesOrder&&f.category.sort(function(n,t){return n.order-t.order});f.category.valueHasMutated()})})}),u.selectWindowInput())},HeightWidth:function(n,t){var f=r.vm.data,o=0,u,e;(r.vm.config.product1.operation()!=""||r.trigger.type!="category")&&r.trigger.type;i.each(t,function(n,t){r.settings.insect.sizes[t.Width]?r.settings.insect.sizes[t.Width][t.Height]=t.Height:(r.settings.insect.sizes[t.Width]={},r.settings.insect.sizes[t.Width][t.Height]=t.Height)});u=[];for(e in r.settings.insect.sizes)r.settings.insect.sizes.hasOwnProperty(e)&&u.push(e);u.sort(function(n,t){return n<t?-1:n>t?1:0});i.each(u,function(n){var t=u[n];f.product1.insectWidth()[o++]={val:t,name:r.settings.insect.widthPreText+r.settings.insect.widths[t]/r.settings.insect.measurement+r.settings.insect.postText}});f.product1.insectWidth.valueHasMutated();f.product1.insectWidth.unshift({val:"",name:""});r.dom.insect.find(".mmc__height select, .mmc__height2 select").attr("disabled","disabled");r.dom.insect.find("select").trigger("chosen:updated")},Operations:function(n,t){var f=r.vm.data,e=0,o;(r.vm.config[n].operation()!=""||r.vm.data[n].operation().length>0)&&r.trigger.type||(t.length||(t=[t]),i.each(f,function(u,e){var o=0;i.each(t,function(t,i){(i.IsValid||!i.IsValid&&r.settings.showInactive)&&(r.vm.controls.showCombination()?f[n].operation()[o++]={val:i.OperationID,name:i.Name,desc:i.Description,inactive:i.IsValid?"":"inactive"}:e.operation()[o++]={val:i.OperationID,name:i.Name,desc:i.Description,inactive:i.IsValid?"":"inactive"})});e.operation.valueHasMutated()}),i.each(t,function(n,t){t.IsValid&&(e++,o=t.OperationID)}),e==1&&(r.vm.config[n].operation(o),u.checkFilledSteps(r.vm.config[n])))},Finishes:function(){},FinishTypes:function(n,t){var o=r.vm.data,f=0,e;r.vm.config[n].category()!="AddOnPleated"&&r.trigger.type||(t.length||(t=[t]),i.each(o,function(n,u){var f=0;i.each(t,function(n,t){(t.IsValid||!t.IsValid&&r.settings.showInactive)&&(u.finishtype()[f++]={val:t.FinishTypeID,name:t.FinishTypeName,desc:t.FinishTypeDescription,inactive:t.IsValid?"":"inactive"})});u.finishtype.valueHasMutated()}),i.each(t,function(n,t){t.IsValid&&(f++,e=t.FinishTypeID)}),f==1&&(r.vm.config[n].finishtype(e),u.checkFilledSteps(r.vm.config[n])))},OuterSurfaces:function(n,t){var o=r.vm.data,f=0,e;(r.vm.config[n].outersurface()!=""||r.vm.data[n].outersurface().length>0)&&r.trigger.type||(t.length||(t=[t]),i.each(o,function(n,u){var f=0;i.each(t,function(n,t){(t.IsValid||!t.IsValid&&r.settings.showInactive)&&(u.outersurface()[f++]={val:t.OuterSurfaceID,name:t.Name,desc:t.Description,inactive:t.IsValid?"":"inactive"})});u.outersurface.valueHasMutated()}),i.each(t,function(n,t){t.IsValid&&(f++,e=t.OuterSurfaceID)}),f==1&&(r.vm.config[n].outersurface(e),u.checkFilledSteps(r.vm.config[n])),r.dom.base.find(".mmc__configStep.mmc__required.mmc__filled:not(.mmc__complete)").length==r.dom.base.find(".mmc__configStep.mmc__required:not(.mmc__complete)").length&&r.update())},Rules:function(n,t){var u=r.vm.data;r.settings.rules.timeout!=null&&clearTimeout(r.settings.rules.timeout);t.RuleNo=="103"&&t.Family==null&&(t.RuleNo="507");r.settings.rules.list[t.RuleNo]||(i.each(r.settings.rules.product,function(n,i){r.vm.config.product1.category()!="InsectNet"&&(i.RuleNo.match(t.RuleNo)||(i.AskForProductCode||i.AskForTypeSignVariant)&&!i.RuleNo||t.RuleNo=="507")&&(t.Product=i)}),r.settings.rules.list[t.RuleNo]=t);r.settings.rules.timeout=setTimeout(function(){f.process(r.settings.rules.list);r.settings.rules.timeout=null},1)},Colors:function(n,t){var f=r.vm.data,e=0,o;(r.vm.config[n].colour()!=""||r.vm.data[n].colour().length>0)&&r.trigger.type||(t.length||(t=[t]),i.each(f,function(u,e){var s=0,o="";i.each(t,function(t,i){(i.IsValid||!i.IsValid&&r.settings.showInactive)&&(r.vm.controls.showCombination()?(o=i.ColorID>4609&&i.ColorID<4622?"BlackoutDisney":r.vm.config[n].category().match(/[A-Z][a-z]+/g)[n.charAt(n.length-1)-1],f[n].colour()[s++]={cat:o,val:i.ColorID,name:i.ColorID+" "+i.ColorDescription,desc:"",inactive:i.IsValid?"":"inactive"}):(o=i.ColorID>4609&&i.ColorID<4622?"BlackoutDisney":r.vm.config.product1.category(),e.colour()[s++]={cat:o,val:i.ColorID,name:i.ColorID+" "+i.Name,desc:"",inactive:i.IsValid?"":"inactive"}))});e.colour.valueHasMutated()}),i.each(t,function(n,t){t.IsValid&&(e++,o=t.ColorID)}),e==1&&(r.vm.config[n].colour(o),u.checkFilledSteps(r.vm.config[n])),r.dom.base.find(".mmc__configStep.mmc__required.mmc__filled:not(.mmc__complete)").length!=r.dom.base.find(".mmc__configStep.mmc__required:not(.mmc__complete)").length||r.dom.base.hasClass("mmc__loading")||r.update())},AvailableProducts:function(n,t){var f=r.vm.config;u.clearCompleteStep();t.length&&r.vm.controls.showProduct2(!0);t.length||(t=[t]);i.each(t,function(t,i){var u=n=="product2"?n:"product"+(t+1),o=i.Price?i.Price.HasDiscount?i.Price.ProductPriceDiscounted.PriceWithVAT:i.Price.ProductPrice.PriceWithVAT:i.PriceWithVAT,e=r.settings["percentDiscount"+f[u].category()];e===undefined&&(e=r.settings.percentDiscount);e!=null&&(o=(parseFloat(o)*((100-e)/100)).toFixed(2));f[u].productPrice(o);f[u].productID(i.VCE);f[u].serviceProductID(i.ProductID);r.settings.rules.product[u]=f[n].category()=="Shutters"?i.RollerShutter:f[n].category()=="InsectNet"?i.InsectNet:i.Blind;r.vm.controls.showProduct2()==!0?r.settings.rules.product[u].AskForTypeSignVariant==!0?r.settings.rules.variant.ID=i.ProductID:r.settings.rules.product[u].AskForProductCode==!0&&(r.settings.rules.production.ID=i.ProductID):(r.settings.rules.variant.ID=i.ProductID,r.settings.rules.production.ID=i.ProductID)})}},change:{windowtype:function(){var t=r.vm.data,n=r.vm.config;r.vm.controls.showProduct2(!1);r.vm.controls.showCombination(!1);i.each(t,function(n,i){i.windowsize.splice(1,t.product1.windowsize().length-1)});i.each(n,function(n,t){t.windowsize("")});r.settings.onSelectWindowType(n.product1.windowtype());if(n.product1.windowtype()==null)return!1},windowsize:function(){var t=r.vm.data,n=r.vm.config;if(r.vm.controls.showProduct2(!1),r.vm.controls.showCombination(!1),i.each(t,function(n,t){t.category.removeAll()}),n.product1.windowsize())r.settings.onSelectWindowSize(n.product1.windowsize());if(n.product1.windowsize()==null)return!1},category:function(){var i=r.vm.data,n=r.vm.config,t=r.trigger.target.closest(".mmc__option").data("parent");r.vm.controls.showProduct2(!1);t=="COMBINATION"?r.vm.controls.showCombination(!0):r.vm.controls.showCombination(!1);r.settings.onSelectCategory(n.product1.category());u.resetSteps()},operation:function(){var t=r.vm.data,n=r.vm.config;r.settings.onSelectOperation(n.product1.operation());u.resetSteps()},outersurface:function(){var t=r.vm.data,n=r.vm.config;r.settings.onSelectOuterSurface(n.product1.outersurface());u.resetSteps()},colour:function(){var t=r.vm.data,n=r.vm.config;r.settings.onSelectColour(n.product1.colour());u.resetSteps()},finishtype:function(){},insectWidth:function(){var u=r.vm.data,f=r.vm.config,o=r.settings.insect.sizes[f.product1.insectWidth()],n=[],t,e;for(i.each(o,function(t,i){n.push(i)}),r.settings.insect.type=="double"&&r.settings.insect.shape()=="straight"&&(n=n.join(","),n.match(/1600/gi)&&n.match(/2000/gi)&&n.match(/2400/gi)?n=[1600,2e3,2400,3200,3600,4e3,4400,4800]:n.match(/1600/gi)&&n.match(/2000/gi)?n=[1600,2e3,3200,3600,4e3]:n.match(/1600/gi)&&n.match(/2400/gi)?n=[1600,2400,3200,4e3,4800]:n.match(/2000/gi)&&n.match(/2400/gi)?n=[2e3,2400,4e3,4400,4800]:n.match(/1600/gi)?n=[1600,3200]:n.match(/2000/gi)?n=[2e3,4e3]:n.match(/2400/gi)&&(n=[2400,4800])),r.settings.insect.shape()=="straight"&&r.vm.controls.showProduct2()==!0&&r.vm.controls.showProduct2(!1),t=1,e=2;t<=e;t++)u["product"+t].insectHeight.splice(1,u["product"+t].insectHeight().length-1),i.each(n,function(n,i){u["product"+t].insectHeight.push({val:i,name:r.settings.insect.heightPreText+i/r.settings.insect.measurement+r.settings.insect.postText})}),u["product"+t].insectHeight.unshift({val:"",name:""});return f.product1.insectHeight(""),f.product2.insectHeight(""),r.dom.insect.find("select").removeAttr("disabled").trigger("chosen:updated"),!1},insectHeight:function(){var t=r.vm.data,n=r.vm.config;if(r.settings.insect.height=n.product1.insectHeight(),r.settings.insect.height>2400){r.vm.controls.showProduct2(!0);r.settings.insect.height==3200?(n.product1.insectHeight(1600),n.product2.insectHeight(1600)):r.settings.insect.height==3600?(n.product1.insectHeight(1600),n.product2.insectHeight(2e3)):r.settings.insect.height==4e3?(n.product1.insectHeight(2e3),n.product2.insectHeight(2e3)):r.settings.insect.height==4400?(n.product1.insectHeight(2e3),n.product2.insectHeight(2400)):r.settings.insect.height==4800&&(n.product1.insectHeight(2400),n.product2.insectHeight(2400));r.settings.onSelectInsectNet(n.product1.insectWidth()+" "+n.product1.insectHeight()+" "+n.product2.insectHeight())}else if(r.settings.insect.shape()=="bent"){if(n.product2.insectHeight()=="")return!1;r.settings.onSelectInsectNet(n.product1.insectWidth()+" "+n.product1.insectHeight())}else{n.product2.insectHeight("");r.vm.controls.showAddon(!1);r.vm.controls.showProduct2(!1);r.settings.onSelectInsectNet(n.product1.insectWidth()+" "+n.product1.insectHeight())}},insectHeight2:function(){var t=r.vm.data,n=r.vm.config;if(r.settings.insect.shape()=="bent"){if(n.product1.insectHeight()=="")return!1;r.settings.onSelectInsectNet(n.product1.insectWidth()+" "+n.product1.insectHeight()+" "+n.product2.insectHeight())}}}};try{i.each(generalSettings,function(n,t){typeof t!="object"&&(r.settings[n]=t)})}catch(l){}var u=new loadConfiguratorFunctions(r,n,t,i),f=new loadRulesFunctions(r,u,n,t,i),a=function(){var n=this},h=function(){var n=this;n.buyProduct1=ko.observable(!0);n.buyProduct2=ko.observable(!0);n.buyProductAddon=ko.observable(!0);n.showProduct2=ko.observable(!1);n.showSelectionProducts=ko.observable(!1);n.showCombination=ko.observable(!1);n.showAddon=ko.observable(!1);n.showQuestion=ko.observable(!1);n.showShopButton=ko.observable(r.settings.showShopButton);n.showDealerButton=ko.observable(r.settings.showDealerButton);n.showPrintButton=ko.observable(r.settings.showPrintButton);n.showMailButton=ko.observable(r.settings.showMailButton);n.showWindowStep=ko.observable(r.settings.showWindowStep);n.showCategoryStep=ko.observable(r.settings.showCategoryStep);n.showOperationStep=ko.observable(r.settings.showOperationStep);n.showColourStep=ko.observable(r.settings.showColourStep);n.showOuterSurfaceStep=ko.observable(r.settings.showOuterSurfaceStep);n.showInsectNetStep=ko.observable(r.settings.showInsectNetStep);n.showExtraQuestion=ko.observable(r.settings.showExtraQuestion);n.showOnlyFlatroof=ko.observable(r.settings.showOnlyFlatroof);n.updateConfigurator=function(n,t){r.vm.config.product1.productPrice("");r.vm.config.product2.productPrice("");r.vm.controls.buyProduct1(!0);r.vm.controls.buyProduct2(!0);r.dom.complete.find(".mmc__product .mmc__addToCart input:not(input:checked)").click();r.dom.base.hasClass("mmc__loading")||(r.trigger.target=i(t.target),r.trigger.type=r.trigger.target.attr("name"));u.hideMessage(0);r.change[r.trigger.type]()!=!1&&setTimeout(function(){r.update()},1)};n.switchStep=function(){if(r.dom.activeStep().hasClass("mmc__filled")){var n=r.dom.activeStep().attr("data-type"),t=n.charAt(0).toUpperCase()+n.slice(1,n.length);try{r.settings["onNext"+t](t)}catch(i){}}u.switchStep()};n.showMessage=function(){u.showMessage()};n.stepIndex=function(n){var t=r.dom.options.find(".mmc__configStep."+n);return targetIndex=t.index(".mmc__required")+1}},e=function(n){var t=this;t.windowtype=ko.observable("");t.windowsize=ko.observable("");t.windowTypeSize=ko.computed(function(){var n=t.windowtype()==null?"":t.windowtype(),i=t.windowsize()==null?"":t.windowsize();return n+" "+i});t.category=ko.observable("");t.operation=ko.observable("");t.finishtype=ko.observable("");t.colour=ko.observable("");t.outersurface=ko.observable("");t.insectWidth=ko.observable("");t.insectHeight=ko.observable("");t.configureType=ko.computed(function(){return t.category()=="Shutters"?"Shutter":t.category()=="InsectNet"?"InsectNet":"Blind"});t.variantcode=ko.observable("");t.productioncode=ko.observable("");i.each(r.options,function(u,f){t[f+"Text"]=ko.computed(function(){if(t[f]()){var u="";return i.each(r.vm.data["product"+n][f](),function(i,e){var o=r.vm.controls.showCombination()&&f=="category"?t[f]().match(/[A-Z][a-z]+/g)[n-1]:t[f]();e.val==o&&(u=e.name)}),u}})});t.insectWidthHeight=ko.computed(function(){var n=t.insectWidthText()==null?"":t.insectWidthText(),i=t.insectHeightText()==null?"":t.insectHeightText(),r=t.insectWidthText()&&t.insectHeightText()?" / ":"";return n+r+i});t.productID=ko.observable("");t.serviceProductID=ko.observable("");t.productPrice=ko.observable("");t.formattedProductPrice=ko.computed(function(){var i=t.productPrice();try{if(r.vm.controls.showCombination()==!0&&(n!=2||!r.vm.config.product1.productPrice()))return}catch(u){}return i?r.formatPrice(i):""});t.showProductRow=ko.observable("Blind");t.showFinishType=ko.observable(!1);t.showCampaignText=ko.observable(!1);t.showPrice=ko.observable(!1);t.checkActive=function(n,i){return t[n]()==i?"mmc__active":""}},c=function(){var n=this;n.VCE=ko.observable("");n.Name=ko.observable("");n.Desc=ko.observable("");n.ImageSrc=ko.observable("");n.Price=ko.observable("");n.Checked=ko.observable(!1);n.productPrice=ko.observable("");n.serviceProductID=ko.observable("")},o=function(){var n=this;n.windowtype=ko.observableArray([{val:null,name:r.settings.selectTypeText}]);n.windowsize=ko.observableArray([{val:null,name:r.settings.selectSizeText}]);n.category=ko.observableArray([]);n.operation=ko.observableArray([]);n.finishtype=ko.observableArray([]);n.colour=ko.observableArray([]);n.outersurface=ko.observableArray([]);n.insectWidth=ko.observableArray([{val:null,name:null}]);n.insectHeight=ko.observableArray([{val:null,name:null}])};r.vm={controls:new h,config:{product1:new e(1),product2:new e(2)},addon:new c,data:{product1:new o,product2:new o}};ko.applyBindings(r.vm);try{i.each(generalSettings,function(n,t){typeof t=="object"&&n==="preConfig"&&i.each(t,function(n,t){r.vm.config.product1[n.toLowerCase()](t)})});delete generalSettings}catch(l){}r.init();r.dom.title.bind("click",function(){var n=i(this).closest(".mmc__configStep");(n.hasClass("mmc__filled")||n.hasClass("mmc__next"))&&!n.hasClass("mmc__active")&&(r.dom.activeStep().hasClass("mmc__filled")||n.hasClass("mmc__filled")&&n.index()<r.dom.activeStep().index())&&u.switchStep(n)});r.dom.title.find("a").bind("click",function(n){n.preventDefault()});r.dom.edit.bind("click",function(n){n.preventDefault();var t=r.dom.options.find(".mmc__configStep.mmc__"+i(this).attr("href").replace("#",""));u.switchStep(t)});r.dom.selection.on("click","img, .mmc__icon.mmc__zoom",function(){u.zoomIllustration(i(this).closest(".mmc__content").find(".mmc__window img"))});r.dom.selection.on("click",".mmc__icon.mmc__turn",function(){r.trigger.type="turn";u.updateIllustration()});r.dom.step.on({click:function(){return!1},mouseenter:function(){r.trigger.target=i(event.target).closest(".mmc__option");r.trigger.type=r.trigger.target.attr("name");u.showInfoTooltip()},mouseleave:function(){u.hideInfoTooltip()}},".mmc__option.mmc__inactive");r.dom.step.on({click:function(n){if(i(n.target).closest(".mmc__option").hasClass("mmc__active"))return!1;var t=i(n.target).closest(".mmc__option").find("input").val(),u=i(n.target).closest(".mmc__configStep").data("type"),f="product"+i(n.target).closest(".mmc__options").data("product");return r.vm.config[f][u](t),i(n.target)[0].nodeName=="TD"&&i(n.target).closest(".mmc__option").find("input").click(),i(n.target).closest(".mmc__option").find("input").change(),!1},mouseover:function(n){i(n.target).closest(".mmc__tooltip").length>0||i(n.target).closest(".mmc__option").hasClass("mmc__finishtype")||i(n.target).closest(".mmc__option").hasClass("mmc__disableTooltip")||(r.trigger.target=i(n.target).closest(".mmc__option").find("input"),r.trigger.type=r.trigger.target.attr("name"),u.showOptionTooltip())},mouseout:function(){u.hideOptionTooltip()}},".mmc__option:not(.mmc__option.mmc__inactive, .mmc__insectnet .mmc__option)");r.dom.base.on({mouseover:function(n){i(n.target).find("span.mmc__message").length==0&&i(n.target)[0].nodeName!="LABEL"||r.trigger.infotip||(r.trigger.target=i(n.target),r.trigger.type=r.trigger.target.attr("name"),u.showInfoTooltip())},mouseout:function(n){(i(n.target).find("span.mmc__message").length!=0||i(n.target)[0].nodeName=="LABEL")&&u.hideInfoTooltip()}},".mmc__icon, .mmc__select.mmc__disabled");r.dom.windows.on({mouseover:function(n){i(n.target).closest(".mmc__select").find("label").mouseover()},mouseleave:function(n){i(n.target).closest(".mmc__select").find("label").mouseleave()}},".mmc__select.mmc__disabled a, .mmc__select.mmc__disabled b, .mmc__select.mmc__disabled select");r.dom.insectSelect.on({click:function(n){n.preventDefault();i(this).closest(".mmc__insectNetTypes").find(".mmc__option").removeClass("mmc__active");i(this).closest(".mmc__option").addClass("mmc__active");i(this).closest(".mmc__configStep").removeClass("mmc__filled");r.dom.insect.find(".mmc__sizeRow.mmc__height2").hide();i(this).closest(".mmc__option").hasClass("mmc__bent")?(r.dom.insect.find(".mmc__sizeRow.mmc__height2").show(),r.vm.controls.showProduct2(!0)):r.vm.controls.showProduct2(!1);r.dom.insect.find(".mmc__insectNetSizes").slideDown(500,"linear");r.vm.config.product1.insectWidth()!=""&&r.dom.insect.find('select[name="insectWidth"]').change();r.settings.onSelectInsectNetType(r.settings.insect.shape())}});i("body").on({submit:function(n){return n.preventDefault(),r.trigger.target=i(n.target).closest(".mmc__codeCheck"),r.trigger.type=r.trigger.target.data("name"),f.checkCode(),!1}},".mmc__codeCheck form");i("body").on({click:function(n){i(n.target).closest(".mmc__codeCheck").find("form").submit()}},".mmc__codeCheck button");r.dom.base.on({click:function(){u.hideMessage()}},".mmc__userMessage .mmc__userMessageClose span");r.dom.complete.on({click:function(n){r.settings.onBeforeAddToBasket();r.settings.onButtonAddToBasket();r.trigger.target=i(n.target).closest(".mmc__button");r.trigger.type="gotobasket";var t=r.buildRequest();if(r.dom.complete.find("#mmc__AddToBasket input").attr("name","productsinfo").val(t),r.settings.onAfterAddToBasket(),r.settings.shopTarget=="_blank")setTimeout(function(){location.reload()},200);else{if(r.settings.returnFunc!=null)return r.settings.returnFunc(t),!1;r.update()}}},".mmc__button button");r.dom.complete.on({change:function(n){r.trigger.target=i(n.target).closest(".mmc__product");r.trigger.type="productpurchase";var u=i(n.target).is(":checked"),t=r.trigger.target.index()+1;t>2&&(t="Addon");r.vm.controls["buyProduct"+t](u)}},".mmc__addToCart.mmc__checkbox input");u.initShadowbox();r.dom.windows.on({click:function(n){var t=r.dom.blocks.windowtypesize[0].outerHTML;r.settings.onButtonWindowUnknown();Shadowbox.open({content:'<div class="mmc__infoPopup">'+t+'<div class="mmc__closePopup"><span class="mmc__text mmc__shadowBoxClose">'+r.settings.closeText+" x<\/span><\/div><\/div>",player:"html",width:884,options:{displayNav:!1}});n.preventDefault()}},".mmc__options .mmc__button.mmc__small a");r.dom.complete.on({click:function(n){var t=i(n.target).closest(".mmc__userMessage").hasClass("mmc__variant")?"variant":"production",f=i(n.target).closest(".mmc__userMessage").data("rule"),u=r.dom.variant.find(".mmc__codeCheck.mmc__"+t)[0].outerHTML;Shadowbox.open({content:'<div class="mmc__infoPopup">'+u+'<div class="mmc__closePopup"><span class="mmc__text mmc__shadowBoxClose">'+r.settings.closeText+" x<\/span><\/div><\/div>",player:"html",width:884,options:{displayNav:!1}})}},".mmc__userMessage.mmc__codeCheck");r.dom.complete.on({click:function(n){var t=r.dom.blocks.mailerPopup;if(r.trigger.target=i(this),i(".mmc__mailerPopup:visible").length>0)return i(".mmc__mailerPopup").fadeOut(150),!1;i(".mmc__mailerPopup input").val("");i(".mmc__mailerPopup .mmc__sendingStatus").removeClass("mmc__sending mmc__success mmc__fail");t.css({top:r.trigger.target.offset().top+r.trigger.target.height()-r.dom.base.offset().top+5,left:r.trigger.target.offset().left-t.outerWidth()/2-r.dom.base.offset().left+5}).fadeIn(150);n.preventDefault()},mouseenter:function(){r.trigger.enter=function(){r.trigger.timeout!=null&&(clearTimeout(r.trigger.timeout),delete r.trigger.timeout)};r.trigger.enter()},mouseleave:function(){r.trigger.leave=function(){i(".mmc__mailerPopup:visible").length!=0&&(r.trigger.timeout=setTimeout(function(){r.trigger.target.click();delete r.trigger.timeout;delete r.trigger.enter;delete r.trigger.leave},1e3))};r.trigger.leave()}},".mmc__shareButtons .mmc__button.mmc__mail");r.dom.base.on({mouseenter:function(){r.trigger.enter()},mouseleave:function(){r.trigger.leave()}},".mmc__mailerPopup");r.dom.base.on({submit:function(n){r.settings.onButtonEmail();u.submitSendProductsByMail(n)}},".mmc__mailerPopup form");r.dom.complete.on({click:function(){r.settings.onButtonPrint();n.print()}},".mmc__button.mmc__print a");r.dom.complete.on({click:function(){r.settings.onButtonDealer()}},".mmc__button.mmc__dealer a")})}(window,document,jQuery);
/*
//# sourceMappingURL=velux-configurator-bundle.min.js.map
*/